{
  "info": {
    "name": "Fastshop API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Coleção de requests para autenticação JWT, produtos, categorias, pedidos, carrinhos e health."
  },
  "item": [
    {
      "name": "Auth - Login (Admin)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"username\": \"albertovilar1@gmail.com\",\n  \"password\": \"132747\"\n}"
        },
        "url": { "raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth", "login"] }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "const json = pm.response.json();",
              "if (json && json.accessToken) {",
              "  pm.environment.set('jwt', json.accessToken);",
              "}"
            ]
          }
        }
      ]
    },
    {
      "name": "Actuator - Health",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/actuator/health", "host": ["{{baseUrl}}"], "path": ["actuator", "health"] }
      }
    },
    {
      "name": "Products - List",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/products", "host": ["{{baseUrl}}"], "path": ["products"] }
      }
    },
    {
      "name": "Products - Get by Id",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/products/1", "host": ["{{baseUrl}}"], "path": ["products","1"] }
      }
    },
    {
      "name": "Products - Create (ADMIN)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" },
          { "key": "Authorization", "value": "Bearer {{jwt}}" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"categoryId\": 6,\n  \"name\": \"Produto Livre\",\n  \"imageUrl\": \"\",\n  \"description\": \"produto de teste\",\n  \"price\": 19.9,\n  \"stock\": 5\n}"
        },
        "url": { "raw": "{{baseUrl}}/products", "host": ["{{baseUrl}}"], "path": ["products"] }
      }
    },
    {
      "name": "Products - Create (INVALID 422)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" },
          { "key": "Authorization", "value": "Bearer {{jwt}}" }
        ],
        "body": { "mode": "raw", "raw": "{}" },
        "url": { "raw": "{{baseUrl}}/products", "host": ["{{baseUrl}}"], "path": ["products"] }
      }
    },
    {
      "name": "Categories - List",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/categories", "host": ["{{baseUrl}}"], "path": ["categories"] }
      }
    },
    {
      "name": "Categories - Create (ADMIN)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" },
          { "key": "Authorization", "value": "Bearer {{jwt}}" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"Categoria Livre\",\n  \"description\": \"teste\"\n}"
        },
        "url": { "raw": "{{baseUrl}}/categories", "host": ["{{baseUrl}}"], "path": ["categories"] }
      }
    },
    {
      "name": "Orders - Get by Id (AUTH)",
      "request": {
        "method": "GET",
        "header": [ { "key": "Authorization", "value": "Bearer {{jwt}}" } ],
        "url": { "raw": "{{baseUrl}}/orders/1", "host": ["{{baseUrl}}"], "path": ["orders","1"] }
      }
    },
    {
      "name": "Carts - List",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/carts", "host": ["{{baseUrl}}"], "path": ["carts"] }
      }
    },
    {
      "name": "Carts - Get by Id",
      "request": {
        "method": "GET",
        "url": { "raw": "{{baseUrl}}/carts/1", "host": ["{{baseUrl}}"], "path": ["carts","1"] }
      }
    }
  ]
}